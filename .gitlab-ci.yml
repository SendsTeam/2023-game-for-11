stages:          # List of stages for jobs, and their order of execution
  - build
  # - deploy

build-job:       # This job runs in the build stage, which runs first.
  stage: build
  environment: shell
  tags:
    - windows_web_mobile
  script:
    - echo "Compiling the code..."
    - cmd /c build-webmobile.bat
    - echo "Compile complete."
    - ssh xiang@k rm -rf ~/website/WebServer/data/nginx/html/dist
    - scp -r ./build/web-mobile/ xiang@k:~/website/WebServer/data/nginx/html/dist
  artifacts:
    paths:
      - ./build/web-mobile/

# Reserved for feature use.
# deploy-job:
#   stage: deploy
#   image: alpine:latest
#   tags:
#     - windows_web_mobile
#   #before_script:
#     #- sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories
#     #- apk update && apk add openssh-client rsync
#     #- eval $(ssh-agent -s)
#     #- echo "$SSH_PRIVATE_KEY" | ssh-add -
#     #- mkdir -p ~/.ssh
#     #- '[[ -f /.dockerenv ]] && echo -e "Host *\n\tStrictHostKeyChecking no\n\n" > ~/.ssh/config'
#     #- ssh-keyscan xiang@kancy.life >> ~/.ssh/known_hosts
#   script:
#     - ssh xiang@kancy.life bash rm -rf ~/website/WebServer/data/nginx/html/dist
#     - scp -r ./build/web-mobile/ xiang@kancy.life:~/website/WebServer/data/nginx/html/dist


